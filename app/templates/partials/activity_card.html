<article class="activity-card">
    <h3 class="activity-name">{{ activity.name }}</h3>

    <div class="activity-meta">
        {% if activity.number %}
        <span class="activity-number">#{{ activity.number }}</span>
        {% endif %}
        {% if activity.location and activity.location.label %}
        <span class="activity-location">{{ activity.location.label }}</span>
        {% endif %}
    </div>

    <div class="activity-dates">
        {% if activity.date_range_start and activity.date_range_end %}
            {{ activity.date_range_start|format_date }} &ndash; {{ activity.date_range_end|format_date }}
        {% elif activity.date_range_start %}
            {{ activity.date_range_start|format_date }}
        {% endif %}
    </div>

    {% if meeting_dates.get(activity.id) %}
    <div class="activity-schedule">
        {% for pattern in meeting_dates[activity.id].activity_patterns %}
            {% for pd in pattern.pattern_dates %}
            <div class="schedule-item">
                <span class="schedule-days">{{ pd.weekdays }}</span>
                {% if pd.starting_time and pd.ending_time %}
                <span class="schedule-time">{{ pd.starting_time[:5] }} &ndash; {{ pd.ending_time[:5] }}</span>
                {% endif %}
            </div>
            {% endfor %}
        {% endfor %}
    </div>
    {% endif %}

    <div class="activity-details">
        {% if activity.ages %}
        <span class="activity-age">{{ activity.ages }}</span>
        {% endif %}
        {% if activity.total_open is not none %}
        <span class="activity-spots">{{ activity.total_open }} spots open</span>
        {% endif %}
    </div>

    {% if activity.action_link and activity.action_link.href %}
    <div class="activity-actions">
        <a href="{{ activity.action_link.href }}" class="btn btn-enroll" target="_blank">
            {{ activity.action_link.label or "Enroll" }}
        </a>
    </div>
    {% endif %}
</article>
